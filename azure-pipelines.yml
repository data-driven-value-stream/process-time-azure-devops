trigger:
- main

pool:
  vmImage: ubuntu-latest


variables:
- name: PYTHON_VERSION
  value: 3.12.2

steps:
- task: UsePythonVersion@0
  inputs:
    versionSpec: '$(PYTHON_VERSION)'
  displayName: 'Use Python $(PYTHON_VERSION)'

- script: |
    python -m pip install --upgrade pip
    pip install .
  displayName: 'Install dependencies'

- script: |
    orgname="worldpwn"
    token=$(System.AccessToken)
    project="process-time"
    pipeline_id=2
    python src/__main__.py --org $orgname --token $token --project $project --pipeline_id $pipeline_id
  displayName: 'Test â€” Example Run Trunk Based'
  env:
    System.AccessToken: $(System.AccessToken)
